/*!
 * twitter-text-js 1.5.0
 *
 * Copyright 2011 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this work except in compliance with the License.
 * You may obtain a copy of the License at:
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 */
 if("undefined"===typeof window||null===window)window={twttr:{}};null==window.twttr&&(window.twttr={});if("undefined"===typeof twttr||null===twttr)twttr={};
(function(){function f(a,c){c=c||"";if(typeof a!=="string"){a.global&&c.indexOf("g")<0&&(c=c+"g");a.ignoreCase&&c.indexOf("i")<0&&(c=c+"i");a.multiline&&c.indexOf("m")<0&&(c=c+"m");a=a.source}return RegExp(a.replace(/#\{(\w+)\}/g,function(a,c){var i=twttr.txt.regexen[c]||"";if(typeof i!=="string")i=i.source;return i}),c)}function n(a,c){return a.replace(/#\{(\w+)\}/g,function(a,g){return c[g]||""})}function e(a,c,b){var g=String.fromCharCode(c);b!==c&&(g=g+("-"+String.fromCharCode(b)));a.push(g);
return a}function o(a){var c={},b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}function l(a,c,b){return!b?typeof a==="string"&&a.match(c)&&RegExp["$&"]===a:!a||a.match(c)&&RegExp["$&"]===a}twttr.txt={};twttr.txt.regexen={};var t={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};twttr.txt.htmlEscape=function(a){return a&&a.replace(/[&"'><]/g,function(a){return t[a]})};twttr.txt.regexSupplant=f;twttr.txt.stringSupplant=n;twttr.txt.addCharsToCharClass=e;var h=String.fromCharCode,d=
[h(32),h(133),h(160),h(5760),h(6158),h(8232),h(8233),h(8239),h(8287),h(12288)];e(d,9,13);e(d,8192,8202);var q=[h(65534),h(65279),h(65535)];e(q,8234,8238);twttr.txt.regexen.spaces_group=f(d.join(""));twttr.txt.regexen.spaces=f("["+d.join("")+"]");twttr.txt.regexen.invalid_chars_group=f(q.join(""));twttr.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;d=[];e(d,1024,1279);e(d,1280,1319);e(d,11744,11775);e(d,42560,42655);e(d,1425,1471);e(d,1473,1474);e(d,1476,1477);e(d,1479,1479);e(d,
1488,1514);e(d,1520,1524);e(d,64274,64296);e(d,64298,64310);e(d,64312,64316);e(d,64318,64318);e(d,64320,64321);e(d,64323,64324);e(d,64326,64335);e(d,1552,1562);e(d,1568,1631);e(d,1646,1747);e(d,1749,1756);e(d,1758,1768);e(d,1770,1775);e(d,1786,1788);e(d,1791,1791);e(d,1872,1919);e(d,2208,2208);e(d,2210,2220);e(d,2276,2302);e(d,64336,64433);e(d,64467,64829);e(d,64848,64911);e(d,64914,64967);e(d,65008,65019);e(d,65136,65140);e(d,65142,65276);e(d,8204,8204);e(d,3585,3642);e(d,3648,3662);e(d,4352,4607);
e(d,12592,12677);e(d,43360,43391);e(d,44032,55215);e(d,55216,55295);e(d,65441,65500);e(d,12449,12538);e(d,12540,12542);e(d,65382,65439);e(d,65392,65392);e(d,65296,65305);e(d,65313,65338);e(d,65345,65370);e(d,12353,12438);e(d,12441,12446);e(d,13312,19903);e(d,19968,40959);e(d,173824,177983);e(d,177984,178207);e(d,194560,195103);e(d,12291,12291);e(d,12293,12293);e(d,12347,12347);twttr.txt.regexen.nonLatinHashtagChars=f(d.join(""));d=[];e(d,192,214);e(d,216,246);e(d,248,255);e(d,256,591);e(d,595,596);
e(d,598,599);e(d,601,601);e(d,603,603);e(d,611,611);e(d,616,616);e(d,623,623);e(d,626,626);e(d,649,649);e(d,651,651);e(d,699,699);e(d,768,879);e(d,7680,7935);twttr.txt.regexen.latinAccentChars=f(d.join(""));twttr.txt.regexen.hashSigns=/[#\uff03]/;twttr.txt.regexen.hashtagAlpha=f(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i);twttr.txt.regexen.hashtagAlphaNumeric=f(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i);twttr.txt.regexen.endHashtagMatch=f(/^(?:#{hashSigns}|:\/\/)/);twttr.txt.regexen.hashtagBoundary=
f(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/);twttr.txt.regexen.validHashtag=f(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);twttr.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@\uff20]|RT:?)/;twttr.txt.regexen.atSigns=/[@\uff20]/;twttr.txt.regexen.validMentionOrList=f("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g");twttr.txt.regexen.validReply=f(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);
twttr.txt.regexen.endMentionMatch=f(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);twttr.txt.regexen.validUrlPrecedingChars=f(/(?:[^A-Za-z0-9@\uff20$#\uff03#{invalid_chars_group}]|^)/);twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/;twttr.txt.regexen.invalidDomainChars=n("#{punct}#{spaces_group}#{invalid_chars_group}",twttr.txt.regexen);twttr.txt.regexen.validDomainChars=f(/[^#{invalidDomainChars}]/);twttr.txt.regexen.validSubdomain=f(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);
twttr.txt.regexen.validDomainName=f(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);twttr.txt.regexen.validGTLD=f(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/);twttr.txt.regexen.validCCTLD=f(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)(?=[^0-9a-zA-Z]|$))/);
twttr.txt.regexen.validPunycode=f(/(?:xn--[0-9a-z]+)/);twttr.txt.regexen.validDomain=f(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);twttr.txt.regexen.validAsciiDomain=f(/(?:(?:[a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);twttr.txt.regexen.invalidShortDomain=f(/^#{validDomainName}#{validCCTLD}$/);twttr.txt.regexen.validPortNumber=f(/[0-9]+/);twttr.txt.regexen.validGeneralUrlPathChars=f(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~|&#{latinAccentChars}]/i);
twttr.txt.regexen.validUrlBalancedParens=f(/\(#{validGeneralUrlPathChars}+\)/i);twttr.txt.regexen.validUrlPathEndingChars=f(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);twttr.txt.regexen.validUrlPath=f("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i");twttr.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;twttr.txt.regexen.validUrlQueryEndingChars=
/[a-z0-9_&=#\/]/i;twttr.txt.regexen.extractUrl=f("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi");twttr.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i;twttr.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i;twttr.txt.regexen.validCashtag=f("(?:^|#{spaces})\\$(#{cashtag})(?=$|\\s|[#{punct}])","gi");twttr.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i;twttr.txt.regexen.validateUrlPctEncoded=
/(?:%[0-9a-f]{2})/i;twttr.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i;twttr.txt.regexen.validateUrlPchar=f("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i");twttr.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i;twttr.txt.regexen.validateUrlUserinfo=f("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i");twttr.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;
twttr.txt.regexen.validateUrlIpv4=f(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);twttr.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i;twttr.txt.regexen.validateUrlIp=f("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i");twttr.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomain=
f(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);twttr.txt.regexen.validateUrlHost=f("(?:#{validateUrlIp}|#{validateUrlDomain})","i");twttr.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;twttr.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
twttr.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;twttr.txt.regexen.validateUrlUnicodeDomain=f(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);twttr.txt.regexen.validateUrlUnicodeHost=f("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i");twttr.txt.regexen.validateUrlPort=/[0-9]{1,5}/;twttr.txt.regexen.validateUrlUnicodeAuthority=
f("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i");twttr.txt.regexen.validateUrlAuthority=f("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i");twttr.txt.regexen.validateUrlPath=f(/(\/#{validateUrlPchar}*)*/i);twttr.txt.regexen.validateUrlQuery=f(/(#{validateUrlPchar}|\/|\?)*/i);twttr.txt.regexen.validateUrlFragment=f(/(#{validateUrlPchar}|\/|\?)*/i);twttr.txt.regexen.validateUrlUnencoded=f("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$",
"i");var u={urlClass:true,listClass:true,usernameClass:true,hashtagClass:true,cashtagClass:true,usernameUrlBase:true,listUrlBase:true,hashtagUrlBase:true,cashtagUrlBase:true,usernameUrlBlock:true,listUrlBlock:true,hashtagUrlBlock:true,linkUrlBlock:true,usernameIncludeSymbol:true,suppressLists:true,suppressNoFollow:true,suppressDataScreenName:true,urlEntities:true,symbolTag:true,textWithSymbolTag:true,urlTarget:true,invisibleTagAttrs:true,linkAttributeBlock:true,linkTextBlock:true},r={disabled:true,
readonly:true,multiple:true,checked:true};twttr.txt.tagAttrs=function(a){var c="",b;for(b in a){var g=a[b];r[b]&&(g=g?b:null);g!=null&&(c=c+(" "+twttr.txt.htmlEscape(b)+'="'+twttr.txt.htmlEscape(g.toString())+'"'))}return c};twttr.txt.linkToText=function(a,c,b,g){if(!g.suppressNoFollow)b.rel="nofollow";g.linkAttributeBlock&&g.linkAttributeBlock(a,b);g.linkTextBlock&&(c=g.linkTextBlock(a,c));a={text:c,attr:twttr.txt.tagAttrs(b)};return n("<a#{attr}>#{text}</a>",a)};twttr.txt.linkToTextWithSymbol=function(a,
c,b,g,i){var d=i.symbolTag?"<"+i.symbolTag+">"+c+"</"+i.symbolTag+">":c,b=twttr.txt.htmlEscape(b),b=i.textWithSymbolTag?"<"+i.textWithSymbolTag+">"+b+"</"+i.textWithSymbolTag+">":b;return i.usernameIncludeSymbol||!c.match(twttr.txt.regexen.atSigns)?twttr.txt.linkToText(a,d+b,g,i):d+twttr.txt.linkToText(a,b,g,i)};twttr.txt.linkToHashtag=function(a,c,b){var c=c.substring(a.indices[0],a.indices[0]+1),g=twttr.txt.htmlEscape(a.hashtag),i=o(b.htmlAttrs||{});i.href=b.hashtagUrlBase+g;i.title="#"+g;i["class"]=
b.hashtagClass;return twttr.txt.linkToTextWithSymbol(a,c,g,i,b)};twttr.txt.linkToCashtag=function(a,c,b){var c=twttr.txt.htmlEscape(a.cashtag),g=o(b.htmlAttrs||{});g.href=b.cashtagUrlBase+c;g.title="$"+c;g["class"]=b.cashtagClass;return twttr.txt.linkToTextWithSymbol(a,"$",c,g,b)};twttr.txt.linkToMentionAndList=function(a,c,b){var c=c.substring(a.indices[0],a.indices[0]+1),g=twttr.txt.htmlEscape(a.screenName),i=twttr.txt.htmlEscape(a.listSlug),d=a.listSlug&&!b.suppressLists,e=o(b.htmlAttrs||{});e["class"]=
d?b.listClass:b.usernameClass;e.href=d?b.listUrlBase+g+i:b.usernameUrlBase+g;!d&&!b.suppressDataScreenName&&(e["data-screen-name"]=g);return twttr.txt.linkToTextWithSymbol(a,c,d?g+i:g,e,b)};twttr.txt.linkToUrl=function(a,c,b){var c=a.url,g=twttr.txt.htmlEscape(c),i=b.urlEntities&&b.urlEntities[c]||a;i.display_url&&(g=twttr.txt.linkTextWithEntity(i,b));var d=o(b.htmlAttrs||{});d.href=c;if(b.urlClass)d["class"]=b.urlClass;if(b.urlTarget)d.target=b.urlTarget;if(!b.title&&i.display_url)d.title=i.expanded_url;
return twttr.txt.linkToText(a,g,d,b)};twttr.txt.linkTextWithEntity=function(a,c){var b=a.display_url,g=a.expanded_url,d=b.replace(/\u2026/g,"");if(g.indexOf(d)!=-1){var e=g.indexOf(d),b={displayUrlSansEllipses:d,beforeDisplayUrl:g.substr(0,e),afterDisplayUrl:g.substr(e+d.length),precedingEllipsis:b.match(/^\u2026/)?"\u2026":"",followingEllipsis:b.match(/\u2026$/)?"\u2026":""},f;for(f in b)b.hasOwnProperty(f)&&(b[f]=twttr.txt.htmlEscape(b[f]));b.invisible=c.invisibleTagAttrs;return n("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",
b)}return b};twttr.txt.autoLinkEntities=function(a,c,b){b=o(b||{});b.hashtagClass=b.hashtagClass||"tweet-url hashtag";b.hashtagUrlBase=b.hashtagUrlBase||"https://twitter.com/#!/search?q=%23";b.cashtagClass=b.cashtagClass||"tweet-url cashtag";b.cashtagUrlBase=b.cashtagUrlBase||"https://twitter.com/#!/search?q=%24";b.listClass=b.listClass||"tweet-url list-slug";b.usernameClass=b.usernameClass||"tweet-url username";b.usernameUrlBase=b.usernameUrlBase||"https://twitter.com/";b.listUrlBase=b.listUrlBase||
"https://twitter.com/";b.htmlAttrs=twttr.txt.extractHtmlAttrsFromOptions(b);b.invisibleTagAttrs=b.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var g,d,e;if(b.urlEntities){g={};d=0;for(e=b.urlEntities.length;d<e;d++)g[b.urlEntities[d].url]=b.urlEntities[d];b.urlEntities=g}g="";e=0;c.sort(function(a,b){return a.indices[0]-b.indices[0]});for(d=0;d<c.length;d++){var f=c[d];g=g+a.substring(e,f.indices[0]);f.url?g=g+twttr.txt.linkToUrl(f,a,b):f.hashtag?g=g+twttr.txt.linkToHashtag(f,a,b):
f.screenName?g=g+twttr.txt.linkToMentionAndList(f,a,b):f.cashtag&&(g=g+twttr.txt.linkToCashtag(f,a,b));e=f.indices[1]}return g=g+a.substring(e,a.length)};twttr.txt.autoLinkWithJSON=function(a,c,b){var g=[],d;for(d in c)g=g.concat(c[d]);for(c=0;c<g.length;c++){entity=g[c];if(entity.screen_name)entity.screenName=entity.screen_name;else if(entity.text)entity.hashtag=entity.text}twttr.txt.modifyIndicesFromUnicodeToUTF16(a,g);return twttr.txt.autoLinkEntities(a,g,b)};twttr.txt.extractHtmlAttrsFromOptions=
function(a){var c={},b;for(b in a){var g=a[b];if(!u[b]){r[b]&&(g=g?b:null);g!=null&&(c[b]=g)}}return c};twttr.txt.autoLink=function(a,c){var b=twttr.txt.extractEntitiesWithIndices(a,{extractUrlWithoutProtocol:false});return twttr.txt.autoLinkEntities(a,b,c)};twttr.txt.autoLinkUsernamesOrLists=function(a,c){var b=twttr.txt.extractMentionsOrListsWithIndices(a);return twttr.txt.autoLinkEntities(a,b,c)};twttr.txt.autoLinkHashtags=function(a,c){var b=twttr.txt.extractHashtagsWithIndices(a);return twttr.txt.autoLinkEntities(a,
b,c)};twttr.txt.autoLinkCashtags=function(a,c){var b=twttr.txt.extractCashtagsWithIndices(a);return twttr.txt.autoLinkEntities(a,b,c)};twttr.txt.autoLinkUrlsCustom=function(a,c){var b=twttr.txt.extractUrlsWithIndices(a,{extractUrlWithoutProtocol:false});return twttr.txt.autoLinkEntities(a,b,c)};twttr.txt.removeOverlappingEntities=function(a){a.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var c=a[0],b=1;b<a.length;b++)if(c.indices[1]>a[b].indices[0]){a.splice(b,1);b--}else c=a[b]};twttr.txt.extractEntitiesWithIndices=
function(a,c){var b=twttr.txt.extractUrlsWithIndices(a,c).concat(twttr.txt.extractMentionsOrListsWithIndices(a)).concat(twttr.txt.extractHashtagsWithIndices(a,{checkUrlOverlap:false})).concat(twttr.txt.extractCashtagsWithIndices(a));if(b.length==0)return[];twttr.txt.removeOverlappingEntities(b);return b};twttr.txt.extractMentions=function(a){for(var c=[],a=twttr.txt.extractMentionsWithIndices(a),b=0;b<a.length;b++)c.push(a[b].screenName);return c};twttr.txt.extractMentionsWithIndices=function(a){for(var c=
[],a=twttr.txt.extractMentionsOrListsWithIndices(a),b=0;b<a.length;b++){mentionOrList=a[b];mentionOrList.listSlug==""&&c.push({screenName:mentionOrList.screenName,indices:mentionOrList.indices})}return c};twttr.txt.extractMentionsOrListsWithIndices=function(a){if(!a||!a.match(twttr.txt.regexen.atSigns))return[];var c=[],b=0;a.replace(twttr.txt.regexen.validMentionOrList,function(g,d,e,f,j,h,k){if(!k.slice(h+g.length).match(twttr.txt.regexen.endMentionMatch)){j=j||"";g=a.indexOf(e+f+j,b);b=g+f.length+
j.length+1;c.push({screenName:f,listSlug:j,indices:[g,b]})}});return c};twttr.txt.extractReplies=function(a){if(!a)return null;a=a.match(twttr.txt.regexen.validReply);return!a||RegExp.rightContext.match(twttr.txt.regexen.endMentionMatch)?null:a[1]};twttr.txt.extractUrls=function(a,c){for(var b=[],g=twttr.txt.extractUrlsWithIndices(a,c),d=0;d<g.length;d++)b.push(g[d].url);return b};twttr.txt.extractUrlsWithIndices=function(a,c){c||(c={extractUrlsWithoutProtocol:true});if(!a||(c.extractUrlsWithoutProtocol?
!a.match(/\./):!a.match(/:/)))return[];for(var b=[];twttr.txt.regexen.extractUrl.exec(a);){var g=RegExp.$2,d=RegExp.$3,e=RegExp.$5,f=RegExp.$7,j=twttr.txt.regexen.extractUrl.lastIndex,h=j-d.length;if(RegExp.$4){if(d.match(twttr.txt.regexen.validTcoUrl)){d=RegExp.lastMatch;j=h+d.length}b.push({url:d,indices:[h,j]})}else if(c.extractUrlsWithoutProtocol&&!g.match(twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)){var k=null,p=false,m=0;e.replace(twttr.txt.regexen.validAsciiDomain,function(a){var c=
e.indexOf(a,m);m=c+a.length;k={url:a,indices:[h+c,h+m]};(p=a.match(twttr.txt.regexen.invalidShortDomain))||b.push(k)});if(k!=null&&f){p&&b.push(k);k.url=d.replace(e,k.url);k.indices[1]=j}}}return b};twttr.txt.extractHashtags=function(a){for(var c=[],a=twttr.txt.extractHashtagsWithIndices(a),b=0;b<a.length;b++)c.push(a[b].hashtag);return c};twttr.txt.extractHashtagsWithIndices=function(a,c){c||(c={checkUrlOverlap:true});if(!a||!a.match(twttr.txt.regexen.hashSigns))return[];var b=[],d=0;a.replace(twttr.txt.regexen.validHashtag,
function(c,e,f,i,h,v){if(!v.slice(h+c.length).match(twttr.txt.regexen.endHashtagMatch)){c=a.indexOf(f+i,d);d=c+i.length+1;b.push({hashtag:i,indices:[c,d]})}});if(c.checkUrlOverlap){var e=twttr.txt.extractUrlsWithIndices(a);if(e.length>0){e=b.concat(e);twttr.txt.removeOverlappingEntities(e);for(var b=[],f=0;f<e.length;f++)e[f].hashtag&&b.push(e[f])}}return b};twttr.txt.extractCashtags=function(a){for(var c=[],a=twttr.txt.extractCashtagsWithIndices(a),b=0;b<a.length;b++)c.push(a[b].cashtag);return c};
twttr.txt.extractCashtagsWithIndices=function(a){if(!a||a.indexOf("$")==-1)return[];var c=[],b=0;a.replace(twttr.txt.regexen.validCashtag,function(d,e){var f=a.indexOf(e,b)-1;b=f+e.length+1;c.push({cashtag:e,indices:[f,b]})});return c};twttr.txt.modifyIndicesFromUnicodeToUTF16=function(a,c){twttr.txt.convertUnicodeIndices(a,c,false)};twttr.txt.modifyIndicesFromUTF16ToUnicode=function(a,c){twttr.txt.convertUnicodeIndices(a,c,true)};twttr.txt.convertUnicodeIndices=function(a,c,b){if(c.length!=0){var d=
0,e=0;c.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var f=0,h=c[0];d<a.length;){if(h.indices[0]==(b?d:e)){var j=h.indices[1]-h.indices[0];h.indices[0]=b?e:d;h.indices[1]=h.indices[0]+j;f++;if(f==c.length)break;h=c[f]}j=a.charCodeAt(d);if(55296<=j&&j<=56319&&d<a.length-1){j=a.charCodeAt(d+1);56320<=j&&j<=57343&&d++}e++;d++}}};twttr.txt.splitTags=function(a){for(var a=a.split("<"),c,b=[],d=0;d<a.length;d=d+1)if(c=a[d]){c=c.split(">");for(var e=0;e<c.length;e=e+1)b.push(c[e])}else b.push("");
return b};twttr.txt.hitHighlight=function(a,c,b){c=c||[];b=b||{};if(c.length===0)return a;var b=b.tag||"em",b=["<"+b+">","</"+b+">"],a=twttr.txt.splitTags(a),d,e,f="",h=0,j=a[0],l=0,k=0,p=false,m=j,o=[],n;for(d=0;d<c.length;d=d+1)for(e=0;e<c[d].length;e=e+1)o.push(c[d][e]);for(c=0;c<o.length;c=c+1){e=o[c];d=b[c%2];for(n=false;j!=null&&e>=l+j.length;){f=f+m.slice(k);if(p&&e===l+m.length){f=f+d;n=true}a[h+1]&&(f=f+("<"+a[h+1]+">"));l=l+m.length;k=0;h=h+2;m=j=a[h];p=false}if(!n&&j!=null){p=e-l;f=f+(m.slice(k,
p)+d);k=p;p=c%2===0?true:false}else n||(f=f+d)}if(j!=null){k<m.length&&(f=f+m.slice(k));for(c=h+1;c<a.length;c=c+1)f=f+(c%2===0?a[c]:"<"+a[c]+">")}return f};var s=[h(65534),h(65279),h(65535),h(8234),h(8235),h(8236),h(8237),h(8238)];twttr.txt.getTweetLength=function(a,c){c||(c={short_url_length:20,short_url_length_https:21});for(var b=a.length,d=twttr.txt.extractUrlsWithIndices(a),e=0;e<d.length;e++){b=b+(d[e].indices[0]-d[e].indices[1]);b=d[e].url.toLowerCase().match(/^https:\/\//)?b+c.short_url_length_https:
b+c.short_url_length}return b};twttr.txt.isInvalidTweet=function(a){if(!a)return"empty";if(twttr.txt.getTweetLength(a)>140)return"too_long";for(var c=0;c<s.length;c++)if(a.indexOf(s[c])>=0)return"invalid_characters";return false};twttr.txt.isValidTweetText=function(a){return!twttr.txt.isInvalidTweet(a)};twttr.txt.isValidUsername=function(a){if(!a)return false;var c=twttr.txt.extractMentions(a);return c.length===1&&c[0]===a.slice(1)};var w=f(/^#{validMentionOrList}$/);twttr.txt.isValidList=function(a){a=
a.match(w);return!(!a||!(a[1]==""&&a[4]))};twttr.txt.isValidHashtag=function(a){if(!a)return false;var c=twttr.txt.extractHashtags(a);return c.length===1&&c[0]===a.slice(1)};twttr.txt.isValidUrl=function(a,c,b){c==null&&(c=true);b==null&&(b=true);if(!a)return false;var d=a.match(twttr.txt.regexen.validateUrlUnencoded);if(!d||d[0]!==a)return false;var a=d[1],e=d[2],f=d[3],h=d[4],d=d[5];return b&&(!l(a,twttr.txt.regexen.validateUrlScheme)||!a.match(/^https?$/i))||!l(f,twttr.txt.regexen.validateUrlPath)||
!l(h,twttr.txt.regexen.validateUrlQuery,true)||!l(d,twttr.txt.regexen.validateUrlFragment,true)?false:c&&l(e,twttr.txt.regexen.validateUrlUnicodeAuthority)||!c&&l(e,twttr.txt.regexen.validateUrlAuthority)};if(typeof module!="undefined"&&module.exports)module.exports=twttr.txt})();